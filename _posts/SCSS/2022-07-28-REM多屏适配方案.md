---
layout: post
filename: 2022-07-28-REM多屏适配方案
title: REM多屏适配方案
date: 2022-07-28 16:53:53 +0800
categories: scss rem
tags: scss rem
---

#### rwd.ts

```javascript
/*
 * 等比公式
 * clientWidth 为通过 documentElement.clientWidth 获取的当前屏幕宽度
 * designWidth 为设计稿宽度（通常为 750）
 * designFontSize 为自定义的设计稿的基准字体大小，为方便计算，设为 100
 * 通过该公式求出 clientFontSize，即动态设置的根字体大小
 */
// clientWidth / designWidth = clientFontSize / designFontSize
/*
 * px 转 rem 公式
 * pxValue 为设计稿中元素的尺寸
 * designFontSize 在前面已定义的 100 （可设为任何数，不过两边要保持一致） 
 * remValue 即为我们实际设置的 rem 大小
 * 该转换一般是在 sass 等 css 编译语言中进行
 */
// remValue = pxValue / designFontSize
const designWidth = 750;
const designFontSize = 100;
export const getFontSize = function () {
   const clientWidth = document.documentElement.clientWidth;
   let fontSize = clientWidth * designFontSize / designWidth;
   if (clientWidth > 540) {
      fontSize = (540 * designFontSize) / designWidth
   }
   if (clientWidth < 320) {
      fontSize = (320 * designFontSize) / designWidth
   }
   return fontSize;
}
export const adjustFontSize = function () {
   const htmlEle = document.getElementsByTagName('html')[0];
   let fontSize = getFontSize();
   htmlEle.style.fontSize = fontSize + 'px';
   window.onresize = () => {
      fontSize = getFontSize();
      htmlEle.style.fontSize = fontSize + 'px';
   }
}
```

#### main.ts

```javascript
import { adjustFontSize } from "./rwd";
window.onload = function () {
    //设置响应式字体
    adjustFontSize();
};
```


#### rem.scss

scss使用

```scss
// rem.scss
$designFontSize : 100;
@function r ($size) {
   @return $size / $designFontSize + rem;
}
```
#### style.scss

```css
@import "./lib/rem.scss";
html {
  height: calc(100% + env(safe-area-inset-bottom));
  height: calc(100% + constant(safe-area-inset-bottom));
  overflow: auto;
  position: relative;
}
body {
  width: 100%;
  height: 100%;
  overflow: auto;
}

.analysis {
    width: r(750);
}
```

----

[参考 https://www.jianshu.com/p/bda93de06510]([https://](https://www.jianshu.com/p/bda93de06510))