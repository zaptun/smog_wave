---
layout: post
filename: 2022-10-18-css实现黑暗模式
title: css实现黑暗模式
date: 2022-10-18 10:54:08 +0800
categories: css 黑暗模式
tags: 黑暗模式 css
---

## 使用filter

filter是一个非常神奇的属性，能将Photoshop一些基础的滤镜效果应用到网站上。笔者平时非常喜欢使用filter，在笔者的CodePen上有许多纯CSS特效都使用了filter，细心的同学可能会发现笔者特别喜欢使用hue-rotate()这个函数结合CSS变量动态生成过渡颜色，

本次的暗黑模式使用到两个滤镜函数：invert()、hue-rotate()。

* invert()：反相，反向输出图像着色，值为0%则无变化，值为0~100%则是线性乘子效果，值为100%则完全反转
hue-rotate()：色相旋转，减弱图像着色，处理非黑白的颜色，值为0deg则无变化，值为0~360deg则逐渐减弱，值超过360deg则相当绕N圈再计算剩
余的值

* invert()简单理解就是黑变白，白变黑，黑白颠倒。hue-rotate()简单理解就是冲淡颜色。为了确保主题色调不会改变，将色相旋转声明为180deg比较合理。

依据上述分析的思路，当按钮处于选中状态时使用+/~连带后面的同胞元素也进入选中状态。若同胞元素无背景色需声明background-color:#fff，否则无法让滤镜效果起效，为了让这个同胞元素在使用滤镜效果时过渡得更自然，声明transition:all 300ms。

```css
html {
    filter: invert(1) hue-rotate(180deg);
}

img,
video,
.logo,
.icon,
.jubao-con {
    filter: invert(1) hue-rotate(180deg);
}

.exclude {
  filter: invert(1) hue-rotate(180deg);
}
```

按照设计原则来说，换肤只针对组件，像一些媒体类型的元素，例如背景、图片、视频等，都是不能直接处理的，需保持其原样。既然暗黑模式是使用了滤镜的反相和色相旋转实现，那么对这些媒体元素再次使用滤镜的反相和色相旋转就能复原了。使用过Photoshop滤镜的同学应该会更清楚。

