!function(){"use strict";var a,b={open:"{{",close:"}}"},c={exp:function(a){return new RegExp(a,"g")},query:function(a,c,e){var f=["#([\\s\\S])+?","([^{#}])*?"][a||0];return d((c||"")+b.open+f+b.close+(e||""))},escape:function(a){return String(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(a,b){var c="Laytpl Error：";return"object"==typeof console&&console.error(c+a+"\n"+(b||"")),c+a}},d=c.exp,e=function(a){this.tpl=a};e.pt=e.prototype,e.pt.parse=function(a,e){var f=this,g=a,h=d("^"+b.open+"#",""),i=d(b.close+"$","");a=a.replace(/[\r\t\n]/g," ").replace(d(b.open+"#"),b.open+"# ").replace(d(b.close+"}"),"} "+b.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(c.query(),function(a){return a=a.replace(h,"").replace(i,""),'";'+a.replace(/\\/g,"")+'; view+="'}).replace(c.query(1),function(a){var c='"+(';return a.replace(/\s/g,"")===b.open+b.close?"":(a=a.replace(d(b.open+"|"+b.close),""),/^=/.test(a)&&(a=a.replace(/^=/,""),c='"+_escape_('),c+a.replace(/\\/g,"")+')+"')}),a='"use strict";var view = "'+a+'";return view;';try{return f.cache=a=new Function("d, _escape_",a),a(e,c.escape)}catch(j){return delete f.cache,c.error(j,g)}},e.pt.render=function(a,b){var d,e=this;return a?(d=e.cache?e.cache(a,c.escape):e.parse(e.tpl,a),b?void b(d):d):c.error("no data")},a=function(a){return"string"!=typeof a?c.error("Template not found"):new e(a)},a.config=function(a){a=a||{};for(var c in a)b[c]=a[c]},a.v="1.1","function"==typeof define?define(function(){return a}):"undefined"!=typeof exports?module.exports=a:window.Zap=a}(),function(){"use strict";function a(){var a={},b=window.location.href,c=b.indexOf("?");if(c>0)for(var d,e,f=b.substring(c+1),g=f.split("&"),h=0;d=g[h];h++)e=g[h]=d.split("="),a[e[0]]=e.length>1?e[1]:!0;return a}function b(){if(q)var a=Math.ceil(q.length/d);if(p>a||1>p)return window.location.href="/404.html";for(var b=[],c={},e=1;a+1>e;e++)e==p?b.push({active:"on",name:p,type:"normal"}):1==e?b.push({name:e,type:"normal"}):e==p-1?b.push({name:e,type:"normal"}):e==p+1?b.push({name:e,type:"normal"}):e==a?b.push({name:e,type:"normal"}):e>1&&p-1>e?b.push({name:"...",type:"font"}):e>p+1&&a>e?b.push({name:"...",type:"back"}):b.push({name:e,type:"normal"});b.forEach(function(a,b){a.name in c&&a.type==c[a.name]||(c[a.name]=a.type,r.push(a))}),Zap(j.page).render(r,function(a){k.page.innerHTML=a});var f=q.slice(d*(p-1),d*p);Zap(j.card).render(f,function(a){k.card.innerHTML=a})}function c(){var a;-1!=window.location.href.indexOf("tags")?a=g:-1!=window.location.href.indexOf("categories")&&(a=h),Zap(j.tag).render(a,function(a){k.card.innerHTML=a})}var d=2,e=[],f=[],g={type:"tags"},h={type:"categories"};DATA.post.forEach(function(a,b){"journey"==a.layout?f.push(a):e.push(a)}),DATA.tags.forEach(function(a,b){g[a.name]=a.post}),DATA.categories.forEach(function(a,b){h[a.name]=a.post});var i=function(a){var b=document.querySelectorAll(a);return b[0]&&1==b.length?b[0]:b},j={card:'{{# for (var i = 0,n = d.length; i<n; i++){ var v = d[i]; }} <li> {{# if(v.img != ""){ }}<a href="{{v.url}}" target="_blank"><img src="{{v.img}}" alt=""></a> {{# } }} <div class="content"> {{# if( v.categories.length > 0 ){ }} <span class="category">{{# for (var k = 0,x = v.categories.length; k<x; k++){ var j = v.categories[k];}} <a href="/categories?categories={{j}}">{{j}}</a> {{# } }}</span> {{# } }} <span class="date">{{(new Date(v.time*1000)).toLocaleString().split(" ")[0]}}</span> <div class="tit"><a href="{{v.url}}" target="_blank">{{v.title}}</a></div> {{# if(v.excerpt != ""){ }} <div class="excerpt">{{v.excerpt}}</div> {{# } }} <div class="readmore"> <span class="more"><a href="{{v.url}}" target="_blank">Read More</a></span> {{# if( v.tags.length > 0 ){ }} <span class="tags"> {{# for (var k = 0,x = v.tags.length; k<x; k++){ var j = v.tags[k];}} <a href="/tags/?tags={{j}}">#{{j}}</a> {{# } }} </span> {{# } }} </div> </div> </li> {{# } }}',page:'<div class="page"> {{# for (var i = 0,n = d.length; i<n; i++){ var v = d[i];}} <span class="{{v.active}}"> {{# if(v.name == "..."){ }} {{v.name}} {{# }else{ }} <a href="javascript:void(0)" page="{{v.name}}">{{v.name}}</a> {{# } }} </span> {{# } }} </div>',tag:'<li> <div class="content">{{# for (var i in d){ var v = d[i]; }} {{# if(!/(type|mk|日本|journey)/.test(i)){ }} <a class="tags_bt" href="/{{d.type}}/?{{d.type}}={{i}}">{{i}}</span> {{# } }} {{# } }} </div></li>'},k={card:i("#box_card"),page:i("#box_page"),tag:i("#box_tag")},l=i("body").getAttribute("type"),m=a().page,n=decodeURIComponent(a().tags),o=decodeURIComponent(a().categories),p=1*m||1,q="",r=[];switch(l){case"tags":q=g[n];break;case"categories":q=h[o];break;default:q=e}q instanceof Array?b():c(),document.addEventListener("click",function(a){var b=a.target,c=b.getAttribute("page");c&&"..."!=c&&(m?window.location.href=window.location.href.replace(/page\=\d?/,"page="+c):window.location.href="-1"==window.location.href.indexOf("?")?window.location.href+"?page="+c:window.location.href+"&page="+c)})}();