function Segment(t,e,n){this.path=t,this.length=t.getTotalLength(),this.path.style.strokeDashoffset=2*this.length,this.begin=e?this.valueOf(e):0,this.end=n?this.valueOf(n):this.length,this.timer=null,this.draw(this.begin,this.end)}Segment.prototype={draw:function(t,e,n,i){if(n){var s=i.hasOwnProperty("delay")?1e3*parseFloat(i.delay):0,a=i.hasOwnProperty("easing")?i.easing:null,h=i.hasOwnProperty("callback")?i.callback:null,r=this;if(this.stop(),s)return delete i.delay,this.timer=setTimeout(function(){r.draw(t,e,n,i)},s),this.timer;var l=new Date,g=this.begin,f=this.end,u=this.valueOf(t),d=this.valueOf(e);!function p(){var t=new Date,e=(t-l)/1e3,i=e/parseFloat(n),s=i;return"function"==typeof a&&(s=a(s)),i>1?(r.stop(),s=1):r.timer=setTimeout(p,1e3/60),r.begin=g+(u-g)*s,r.end=f+(d-f)*s,r.begin<0&&(r.begin=0),r.end>r.length&&(r.end=r.length),r.begin<r.end?r.draw(r.begin,r.end):r.draw(r.begin+(r.end-r.begin),r.end-(r.end-r.begin)),i>1&&"function"==typeof h?h.call(r.context):void 0}()}else this.path.style.strokeDasharray=this.strokeDasharray(t,e)},strokeDasharray:function(t,e){return this.begin=this.valueOf(t),this.end=this.valueOf(e),[this.length,this.length+this.begin,this.end-this.begin].join(" ")},valueOf:function(t){var e=parseFloat(t);if(("string"==typeof t||t instanceof String)&&~t.indexOf("%")){var n;~t.indexOf("+")?(n=t.split("+"),e=this.percent(n[0])+parseFloat(n[1])):~t.indexOf("-")?(n=t.split("-"),e=this.percent(n[0])-parseFloat(n[1])):e=this.percent(t)}return e},stop:function(){clearTimeout(this.timer),this.timer=null},percent:function(t){return parseFloat(t)/100*this.length}},function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.ease={})}(this,function(n){"use strict";function t(n,t){return null==n||isNaN(n)?t:+n}function u(n,u){n=Math.max(1,t(n,1)),u=t(u,.3)*A;var i=u*Math.asin(1/n);return function(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/u)}}function i(n,u){n=Math.max(1,t(n,1)),u=t(u,.3)*A;var i=u*Math.asin(1/n);return function(t){return n*Math.pow(2,-10*t)*Math.sin((t-i)/u)+1}}function r(n,u){n=Math.max(1,t(n,1)),u=1.5*t(u,.3)*A;var i=u*Math.asin(1/n);return function(t){return n*((t=2*t-1)<0?Math.pow(2,10*t)*Math.sin((i-t)/u):Math.pow(2,-10*t)*Math.sin((t-i)/u)+2)/2}}function o(n){return n=t(n,1.70158),function(t){return t*t*((n+1)*t-n)}}function e(n){return n=t(n,1.70158),function(t){return--t*t*((n+1)*t+n)+1}}function c(n){return n=1.525*t(n,1.70158),function(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}}function a(n){return 1-f(1-n)}function f(n){return B>n?L*n*n:D>n?L*(n-=C)*n+E:G>n?L*(n-=F)*n+H:L*(n-=J)*n+K}function h(n){return((n*=2)<=1?1-f(1-n):f(n-1)+1)/2}function s(n){return 1-Math.sqrt(1-n*n)}function M(n){return Math.sqrt(1- --n*n)}function p(n){return((n*=2)<=1?1-Math.sqrt(1-n*n):Math.sqrt(1-(n-=2)*n)+1)/2}function l(n){return Math.pow(2,10*n-10)}function w(n){return 1-Math.pow(2,-10*n)}function b(n){return((n*=2)<=1?Math.pow(2,10*n-10):2-Math.pow(2,10-10*n))/2}function d(n){return 1-Math.cos(n*R)}function y(n){return Math.sin(n*R)}function x(n){return(1-Math.cos(Q*n))/2}function q(n){return n*n*n}function k(n){return--n*n*n+1}function m(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}function v(n){return n*n}function P(n){return n*(2-n)}function O(n){return((n*=2)<=1?n*n:--n*(2-n)+1)/2}function g(n){return+n}function I(n){return n=t(n,3),function(t){return Math.pow(t,n)}}function N(n){return n=t(n,3),function(t){return 1-Math.pow(1-t,n)}}function j(n){return n=t(n,3),function(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}}function z(n,t,u){return 0>(n+="").indexOf("-")&&(n+="-in"),arguments.length>1&&T.hasOwnProperty(n)?T[n](t,u):S.hasOwnProperty(n)?S[n]:g}var A=1/(2*Math.PI),B=4/11,C=6/11,D=8/11,E=.75,F=9/11,G=10/11,H=.9375,J=21/22,K=63/64,L=1/B/B,Q=Math.PI,R=Q/2,S={"linear-in":g,"linear-out":g,"linear-in-out":g,"quad-in":v,"quad-out":P,"quad-in-out":O,"cubic-in":q,"cubic-out":k,"cubic-in-out":m,"poly-in":q,"poly-out":k,"poly-in-out":m,"sin-in":d,"sin-out":y,"sin-in-out":x,"exp-in":l,"exp-out":w,"exp-in-out":b,"circle-in":s,"circle-out":M,"circle-in-out":p,"bounce-in":a,"bounce-out":f,"bounce-in-out":h,"back-in":o(),"back-out":e(),"back-in-out":c(),"elastic-in":u(),"elastic-out":i(),"elastic-in-out":r()},T={"poly-in":I,"poly-out":N,"poly-in-out":j,"back-in":o,"back-out":e,"back-in-out":c,"elastic-in":u,"elastic-out":i,"elastic-in-out":r};n.ease=z}),function(){"use strict";var f,b={open:"{{",close:"}}"},c={exp:function(a){return new RegExp(a,"g")},query:function(a,c,e){var f=["#([\\s\\S])+?","([^{#}])*?"][a||0];return d((c||"")+b.open+f+b.close+(e||""))},escape:function(a){return String(a||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},error:function(a,b){var c="Laytpl Error\uff1a";return"object"==typeof console&&console.error(c+a+"\n"+(b||"")),c+a}},d=c.exp,e=function(a){this.tpl=a};e.pt=e.prototype,e.pt.parse=function(a,e){var f=this,g=a,h=d("^"+b.open+"#",""),i=d(b.close+"$","");a=a.replace(/[\r\t\n]/g," ").replace(d(b.open+"#"),b.open+"# ").replace(d(b.close+"}"),"} "+b.close).replace(/\\/g,"\\\\").replace(/(?="|')/g,"\\").replace(c.query(),function(a){return a=a.replace(h,"").replace(i,""),'";'+a.replace(/\\/g,"")+'; view+="'}).replace(c.query(1),function(a){var c='"+(';return a.replace(/\s/g,"")===b.open+b.close?"":(a=a.replace(d(b.open+"|"+b.close),""),/^=/.test(a)&&(a=a.replace(/^=/,""),c='"+_escape_('),c+a.replace(/\\/g,"")+')+"')}),a='"use strict";var view = "'+a+'";return view;';try{return f.cache=a=new Function("d, _escape_",a),a(e,c.escape)}catch(j){return delete f.cache,c.error(j,g)}},e.pt.render=function(a,b){var e,d=this;return a?(e=d.cache?d.cache(a,c.escape):d.parse(d.tpl,a),b?void b(e):e):c.error("no data")},f=function(a){return"string"!=typeof a?c.error("Template not found"):new e(a)},f.config=function(a){a=a||{};for(var c in a)b[c]=a[c]},f.v="1.1","function"==typeof define?define(function(){return f}):"undefined"!=typeof exports?module.exports=f:window.Zap=f}(),function(){"use strict";function getUrlParams(){var params={},url=window.location.href,idx=url.indexOf("?");if(idx>0)for(var a,nv,queryStr=url.substring(idx+1),args=queryStr.split("&"),i=0;a=args[i];i++)nv=args[i]=a.split("="),params[nv[0]]=!(nv.length>1)||nv[1];return params}var pageItemNum=10,POST=[],JOURNEY_POST=[],TAGS={type:"tags"},CATEGORIES={type:"categories"};DATA.post.forEach(function(data,index){"journey"==data.layout?JOURNEY_POST.push(data):POST.push(data)}),DATA.tags.forEach(function(data,index){TAGS[data.name]=data.post}),DATA.categories.forEach(function(data,index){CATEGORIES[data.name]=data.post});var $$=function(selecter){var result=document.querySelectorAll(selecter);return result[0]&&1==result.length?result[0]:result},rendModel={card:'{{# for (var i = 0,n = d.length; i<n; i++){ var v = d[i]; }} <li> {{# if(v.img && v.img != ""){ }}<a href="{{v.url}}" target="_blank"><img src="{{v.img}}" alt=""></a> {{# } }} <div class="content"> {{# if( v.categories.length > 0 ){ }} <span class="category">{{# for (var k = 0,x = v.categories.length; k<x; k++){ var j = v.categories[k];}} <a href="'+SiteBaseurl+'/categories?categories={{j}}">{{j}}</a> {{# } }}</span> {{# } }} <span class="date">{{(new Date(v.time*1000)).toLocaleString().split(" ")[0]}}</span> <div class="tit"><a href="{{v.url}}" target="_blank">{{v.title}}</a></div> {{# if(v.excerpt != ""){ }} <div class="excerpt">{{v.excerpt}}</div> {{# } }} <div class="readmore"> <span class="more"><a href="{{v.url}}" target="_blank">Read More</a></span> {{# if( v.tags.length > 0 ){ }} <span class="tags"> {{# for (var k = 0,x = v.tags.length; k<x; k++){ var j = v.tags[k];}} <a href="'+SiteBaseurl+'/tags/?tags={{j}}">#{{j}}</a> {{# } }} </span> {{# } }} </div> </div> </li> {{# } }}',page:'<div class="page"> {{# for (var i = 0,n = d.length; i<n; i++){ var v = d[i];}} <span class="{{v.active}}"> {{# if(v.name == "..."){ }} {{v.name}} {{# }else{ }} <a href="javascript:void(0)" page="{{v.name}}">{{v.name}}</a> {{# } }} </span> {{# } }} </div>',tag:'<li> <div class="content">{{# for (var i in d){ var v = d[i]; }} {{# if(!/(^type$|^\u65e5\u672c$|^journey$)/.test(i)){ }} <a class="tags_bt" href="'+SiteBaseurl+'/{{d.type}}/?{{d.type}}={{i}}">{{i}}</span> {{# } }} {{# } }} </div></li>'},rendBox={card:$$("#box_card"),page:$$("#box_page"),tag:$$("#box_tag")},pageType=$$("body").getAttribute("type"),urlPageNum=getUrlParams().page,urlTag=decodeURIComponent(getUrlParams().tags),urlCategory=decodeURIComponent(getUrlParams().categories),pageNumOn=1*urlPageNum||1,articleData="",pageData=[];switch(pageType){case"tags":articleData=TAGS[urlTag];break;case"categories":articleData=CATEGORIES[urlCategory];break;default:articleData=POST}articleData instanceof Array?function(){if(articleData)var pageNum=Math.ceil(articleData.length/pageItemNum);if(pageNumOn>pageNum||pageNumOn<1)return window.location.href="/404.html";for(var _pageData=[],_pageData_h={},i=1;i<pageNum+1;i++)i==pageNumOn?_pageData.push({active:"on",name:pageNumOn,type:"normal"}):1==i?_pageData.push({name:i,type:"normal"}):i==pageNumOn-1?_pageData.push({name:i,type:"normal"}):i==pageNumOn+1?_pageData.push({name:i,type:"normal"}):i==pageNum?_pageData.push({name:i,type:"normal"}):i>1&&i<pageNumOn-1?_pageData.push({name:"...",type:"font"}):i>pageNumOn+1&&i<pageNum?_pageData.push({name:"...",type:"back"}):_pageData.push({name:i,type:"normal"});_pageData.forEach(function(data,index){data.name in _pageData_h&&data.type==_pageData_h[data.name]||(_pageData_h[data.name]=data.type,pageData.push(data))}),Zap(rendModel.page).render(pageData,function(render){rendBox.page.innerHTML=render});var _data=articleData.slice(pageItemNum*(pageNumOn-1),pageItemNum*pageNumOn);Zap(rendModel.card).render(_data,function(render){rendBox.card.innerHTML=render})}():function(){var _data;-1!=window.location.href.indexOf("tags")?_data=TAGS:-1!=window.location.href.indexOf("categories")&&(_data=CATEGORIES),Zap(rendModel.tag).render(_data,function(render){rendBox.card.innerHTML=render})}(),document.addEventListener("click",function(e){var target=e.target,pageNum=target.getAttribute("page");pageNum&&"..."!=pageNum&&(window.location.href=urlPageNum?window.location.href.replace(/page\=\d?/,"page="+pageNum):"-1"==window.location.href.indexOf("?")?window.location.href+"?page="+pageNum:window.location.href+"&page="+pageNum)})}(),function(){function inAC(s){s.draw("80% - 240","80%",.3,{delay:.1,callback:function(){inAC2(s)}})}function inAC2(s){s.draw("100% - 545","100% - 305",.6,{easing:ease.ease("elastic-out",1,.3)})}function inB(s){s.draw(beginB-60,endB+60,.1,{callback:function(){inB2(s)}})}function inB2(s){s.draw(beginB+120,endB-120,.3,{easing:ease.ease("bounce-out",1,.3)})}function outAC(s){s.draw("90% - 240","90%",.1,{easing:ease.ease("elastic-in",1,.3),callback:function(){outAC2(s)}})}function outAC2(s){s.draw("20% - 240","20%",.3,{callback:function(){outAC3(s)}})}function outAC3(s){s.draw(beginAC,endAC,.7,{easing:ease.ease("elastic-out",1,.3)})}function outB(s){s.draw(beginB,endB,.7,{delay:.1,easing:ease.ease("elastic-out",2,.4)})}var beginAC=80,endAC=320,beginB=80,endB=320,pathA=document.getElementById("pathA"),pathB=document.getElementById("pathB"),pathC=document.getElementById("pathC"),segmentA=new Segment(pathA,beginAC,endAC),segmentB=new Segment(pathB,beginB,endB),segmentC=new Segment(pathC,beginAC,endAC),trigger=document.getElementById("menu-icon-trigger"),toCloseIcon=!0,dummy=document.getElementById("dummy");document.getElementById("menu-icon-wrapper").style.visibility="visible",trigger.onclick=function(){toCloseIcon?(inAC(segmentA),inB(segmentB),inAC(segmentC),dummy.className="site_nav dummy--active"):(outAC(segmentA),outB(segmentB),outAC(segmentC),dummy.className="site_nav"),toCloseIcon=!toCloseIcon}}();